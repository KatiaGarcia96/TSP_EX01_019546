-- TSP_EX01_019546

--City
CREATE TABLE EX1_019546.City_table
(
  id_city         INTEGER,
  name_city       VARCHAR2(500),
  state_province  VARCHAR2(500),
  country_name    VARCHAR2(500),
  zip_code        VARCHAR2(500)
);


ALTER TABLE EX1_019546.City_table ADD (
  CONSTRAINT City_table_PK
  PRIMARY KEY
  (id_city)
  ENABLE VALIDATE);

--Address
CREATE TABLE EX1_019546.ADDRESS_TABLE
(
  ID_ADDRESS      INTEGER,
  ADDRESS_LINE_1  VARCHAR2(500),
  ADDRESS_LINE_2  VARCHAR2(500),
  ID_CITY         INTEGER
);


ALTER TABLE EX1_019546.ADDRESS_TABLE ADD (
  CONSTRAINT ADDRESS_TABLE_PK
  PRIMARY KEY
  (ID_ADDRESS)
  ENABLE VALIDATE);

ALTER TABLE EX1_019546.ADDRESS_TABLE ADD (
  CONSTRAINT ID_CITY_C 
  FOREIGN KEY (ID_CITY) 
  REFERENCES EX1_019546.CITY_TABLE (ID_CITY)
  ENABLE VALIDATE);
  
 
  --CUSTOMER
  CREATE TABLE EX1_019546.CUSTOMER_TABLE
(
  ID_CUSTOMER    INTEGER,
  FIRST_NAME     VARCHAR2(500),
  LAST_NAME      VARCHAR2(500),
  COMPANY_NAME   VARCHAR2(500),
  EMAIL_ADDRESS  VARCHAR2(500),
  ADDRESS_TYPE   VARCHAR2(500),
  ID_ADDRESS     INTEGER
);


ALTER TABLE EX1_019546.CUSTOMER_TABLE ADD (
  CONSTRAINT CUSTOMER_TABLE_PK
  PRIMARY KEY
  (ID_CUSTOMER)
  ENABLE VALIDATE);

ALTER TABLE EX1_019546.CUSTOMER_TABLE ADD (
  CONSTRAINT ID_ADDRESS_C 
  FOREIGN KEY (ID_ADDRESS) 
  REFERENCES EX1_019546.ADDRESS_TABLE (ID_ADDRESS)
  ENABLE VALIDATE);
  
  --CULTURA
  CREATE TABLE EX1_019546.CULTURE_TABLE
(
  ID_CULTURE           INTEGER,
  DESCRIPTION_CULTURE  VARCHAR2(1)
);


ALTER TABLE EX1_019546.CULTURE_TABLE ADD (
  CONSTRAINT CULTURE_TABLE_PK
  PRIMARY KEY
  (ID_CULTURE)
  ENABLE VALIDATE);
  
--PRODUCTS
CREATE TABLE EX1_019546.PRODUCT_TABLE
(
  ID_PRODUCT        INTEGER,
  PRODUCT_NAME      VARCHAR2(500),
  LIST_PRICE        NUMBER,
  PRODUCT_SIZE      NUMBER,
  PRODUCT_WEIGHT    NUMBER,
  PRODUCT_CATEGORY  VARCHAR2(500),
  ID_CULTURE        INTEGER
);


ALTER TABLE EX1_019546.PRODUCT_TABLE ADD (
  CONSTRAINT PRODUCT_TABLE_PK
  PRIMARY KEY
  (ID_PRODUCT)
  ENABLE VALIDATE);

ALTER TABLE EX1_019546.PRODUCT_TABLE ADD (
  CONSTRAINT ID_CULTURE_C 
  FOREIGN KEY (ID_CULTURE) 
  REFERENCES EX1_019546.CULTURE_TABLE (ID_CULTURE)
  ENABLE VALIDATE);
  
  
  --ORDEN
  CREATE TABLE EX1_019546.ORDEN_TABLE
(
  ID_ORDEN             INTEGER,
  ORDEN_DATE           VARCHAR2(500),
  SUBTOTAL             NUMBER,
  SHIPPING             NUMBER,
  ID_CUSTOMER          INTEGER,
  ID_BILLING           INTEGER,
  SHIP_METHOD          VARCHAR2(50),
  UNIT_PRICE           NUMBER,
  UNIT_PRICE_DISCOUNT  NUMBER,
  TAX                  NUMBER
);
ALTER TABLE EX1_019546.ORDEN_TABLE ADD 
CONSTRAINT ID_CUSTOMER_C
 FOREIGN KEY (ID_CUSTOMER)
 REFERENCES EX1_019546.CUSTOMER_TABLE (ID_CUSTOMER)
 ENABLE
 VALIDATE;
 
 ALTER TABLE EX1_019546.ORDEN_TABLE ADD 
CONSTRAINT ID_BILLING
 FOREIGN KEY (ID_BILLING)
 REFERENCES EX1_019546.BILLING_ADDRESS (ID_BILLING)
 ENABLE
 VALIDATE;

--ORDEN_PRODUCT
CREATE TABLE EX1_019546.ORDEN_PRODUCT_TABLE
(
  ORDEN_PRODUCT_ID  INTEGER,
  ORDEN_ID          INTEGER,
  PRODUCT_ID        INTEGER,
  QTY               INTEGER
);


ALTER TABLE EX1_019546.ORDEN_PRODUCT_TABLE ADD (
  CONSTRAINT ORDEN_PRODUCT_TABLE_PK
  PRIMARY KEY
  (ORDEN_PRODUCT_ID)
  ENABLE VALIDATE);

ALTER TABLE EX1_019546.ORDEN_PRODUCT_TABLE ADD (
  CONSTRAINT ID_ORDEN_C 
  FOREIGN KEY (ORDEN_ID) 
  REFERENCES EX1_019546.ORDEN_TABLE (ID_ORDEN)
  ENABLE VALIDATE,
  CONSTRAINT ID_PRODUCT_C 
  FOREIGN KEY (PRODUCT_ID) 
  REFERENCES EX1_019546.PRODUCT_TABLE (ID_PRODUCT)
  ENABLE VALIDATE);
  
  
  
  --SECUENCIAS
  --SECUENCIA ID_CITY
  CREATE SEQUENCE EX1_019546.CITY_SQC
START WITH 1
INCREMENT BY 1
MINVALUE 0
MAXVALUE 5000
NOCACHE 
NOCYCLE 
NOORDER;

--SECUENCIA ID_ADDRESS
CREATE SEQUENCE EX1_019546.ADDRESS_SQC
START WITH 1
INCREMENT BY 1
MINVALUE 0
MAXVALUE 5000
NOCACHE 
NOCYCLE 
NOORDER;

--PRODUCTO
CREATE SEQUENCE EX1_019546.ID_PRODUCT_SQC
START WITH 1
INCREMENT BY 1
MINVALUE 0
MAXVALUE 5000
NOCACHE 
NOCYCLE 
NOORDER;

--ORDEN
CREATE SEQUENCE EX1_019546.ID_ORDEN_SQC
START WITH 1
INCREMENT BY 1
MINVALUE 0
MAXVALUE 5000
NOCACHE 
NOCYCLE 
NOORDER;

